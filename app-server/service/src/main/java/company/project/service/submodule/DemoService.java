/* * Copyright (c) 2020. Lorem ipsum dolor sit amet, consectetur adipiscing elit. * Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan. * Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna. * Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus. * Vestibulum commodo. Ut rhoncus gravida arcu. */package company.project.service.submodule;import company.project.model.UserEntity;import company.project.model.repos.UserRepos;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;/** * 一个样例serive * tip: 相关业务service 放到对应的子模块中，而不是直接放到 service 包下 */@Service@Transactional(readOnly = true) // tip: 注意，这里默认的行为是readOnly ,这样做的目的时为了避免使用jpa时产生错误的更新操作public class DemoService {    @Autowired    UserRepos userRepos;    /**     * 样例只读方法     */    public void readOnlyMethod(){        //just a demo        userRepos.findAll();    }    /**     * 样例可写方法     */    @Transactional(readOnly = false)    public void writeableMethod(){        UserEntity userEntity = new UserEntity();        userRepos.save(userEntity);    }    /**     * 样例更新数据方法     */    @Transactional(readOnly = false)    public void updateDataMethod(){        UserEntity userEntity = new UserEntity();        userRepos.save(userEntity);    }    @Transactional(readOnly = false)    public void swapperMethod() {        writeableMethod();        updateDataMethod();    }}